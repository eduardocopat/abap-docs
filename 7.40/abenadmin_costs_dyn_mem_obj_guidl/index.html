


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
      
        <title>Abenadmin costs dyn mem obj guidl - ABAP docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#4051b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://raw.githubusercontent.com/highlightjs/highlight.js/master/src/styles/github.css">
    
      <link rel="stylesheet" href="../../css/abap-docs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#administration-costs-of-dynamic-memory-objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ABAP docs" class="md-header-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ABAP docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Abenadmin costs dyn mem obj guidl
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ABAP docs" class="md-nav__button md-logo" aria-label="ABAP docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    ABAP docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/eduardocopat/abap-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    eduardocopat/abap-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../7.31/abapdata_options/" title="7.31" class="md-nav__link">
      7.31
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rule" class="md-nav__link">
    Rule
  </a>
  
    <nav class="md-nav" aria-label="Rule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#verhaltnis-von-verwaltungs-zu-nutzdaten-beachten" class="md-nav__link">
    Verhältnis von Verwaltungs- zu Nutzdaten beachten
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#details" class="md-nav__link">
    Details
  </a>
  
    <nav class="md-nav" aria-label="Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beispiel" class="md-nav__link">
    Beispiel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/eduardocopat/abap-docs/edit/master/docs/7.40/abenadmin_costs_dyn_mem_obj_guidl.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <p><small>
<a href="../abenabap" class="blue">ABAP Keyword Documentation</a>&#xA0;&#x2192;&#xA0;
<a href="../abenabap_pgl" class="blue">ABAP Programming Guidelines</a>&#xA0;&#x2192;&#xA0;
<a href="../abenrobust_abap_guidl" class="blue">Robust ABAP</a>&#xA0;&#x2192;&#xA0;
<a href="../abendynamic_prog_technique_guidl" class="blue">Dynamic Programming Techniques</a>&#xA0;</small></p>
<h1 id="administration-costs-of-dynamic-memory-objects">Administration Costs of Dynamic Memory Objects</h1>
<p><a name="@@ITOC@@BACKGROUND_1"></a>
Other versions: 
 <a href="../../7.31/abenadmin_costs_dyn_mem_obj_guidl">7.31</a> | <b>7.40</b> | <a href="../../7.54/abenadmin_costs_dyn_mem_obj_guidl">7.54</a></p>
<h2 id="background">Background</h2>
<p>Dynamic memory objects provide flexibility, but this comes at a price. The administration of these objects
incurs internal costs, which are reflected in increased memory consumption, and in the worst case possibly far too high.</p>
<p>The total memory requirements of a dynamic memory object comprise the requirements of the objects themselves
and the requirements of the administration data. The administration data consists of the reference,
with a fixed size of 8 bytes, and a header that contains the address of the data itself and additional
administration information. The reference initially points to a header and not directly to the object. The size of the header is itself dynamic and depends on the category of memory object as follows:</p>
<ul>

<li><span class="italic">String header</span>s of strings whose length is less than approximately 30
characters or 60 bytes require between 10 and 40 bytes approximately, depending on the string length. For longer strings, the header requires approximately 50 bytes, regardless of the string length.</li>

</ul>

<ul>

<li><span class="italic">Table headers</span> require approximately 150 bytes (in 32 bit architecture) or approximately 200 bytes (in 64 bit architecture).</li>

</ul>

<ul>

<li><span class="italic">Object header</span>s of anonymous data objects and instances of classes require approximately 30 bytes, regardless of the object.</li>

</ul>

<p>The headers are created when dynamic data objects are provided with content or when objects are generated.
When a dynamic data object (a string or internal table) is initialized, only the content itself is deleted,
while the header is retained to be used again. Only the statement <code style="display: inline;"><span class="qtext">FREE</span></code> deletes
(some) table headers that are too big. When it deletes an object, Garbage Collector also deletes the object header.</p>
<p>Bei internen Tabellen kommt zu den Verwaltungsdaten im Header, die weitestgehend unabh&#xE4;ngig von
der Zeilenzahl sind, ein weiterer Anteil f&#xFC;r jede Zeile hinzu, wie die Index- oder Hash-Verwaltung.
Dieser Speicher wird nicht im Tabellen-Header, sondern parallel zum Tabellenk&#xF6;rper angelegt.
Abh&#xE4;ngig von der Tabellenart hat jede Tabelle mindestens einen Prim&#xE4;rindex (Standardtabellen, sortierte Tabellen) oder eine Hash-Verwaltung (Hash-Tabellen). Die Kosten sind:</p>
<ul>

<li>im Mittel 6 Byte pro Tabellenzeile f&#xFC;r den Prim&#xE4;rindex</li>

</ul>

<ul>

<li>im Mittel 18 Byte pro Tabellenzeile f&#xFC;r die Hash-Verwaltung, solange nicht mit einer der
Anweisungen <code style="display: inline;"><span class="qtext">DELETE</span></code> oder <code style="display: inline;"><span class="qtext">SORT</span></code> auf die Tabelle zugegriffen wird. Nach einem solchen Zugriff werden im Mittel 30 Byte pro Tabellenzeile ben&#xF6;tigt</li>

</ul>

<p>F&#xFC;r jeden zus&#xE4;tzlichen sekund&#xE4;ren Tabellenschl&#xFC;ssel erh&#xF6;ht sich der
Speicherbedarf zus&#xE4;tzlich um den f&#xFC;r die Sekund&#xE4;rschl&#xFC;sselverwaltung (Sekund&#xE4;rindex oder sekund&#xE4;re Hash-Verwaltung) ben&#xF6;tigten
<a href="../abensecondary_key_guidl" class="lnkpurple" title="Guideline">Speicher</a>.</p>
<p><a name="@@ITOC@@RULE_2"></a></p>
<h2 id="rule">Rule</h2>
<h3 id="verhaltnis-von-verwaltungs-zu-nutzdaten-beachten">Verhältnis von Verwaltungs- zu Nutzdaten beachten</h3>
<p>Behalten Sie bei der Verwendung dynamisch verwalteter Speicherobjekte im Auge, dass neben dem Speicher
f&#xFC;r die eigentlichen Daten auch Speicher f&#xFC;r Verwaltungszwecke ben&#xF6;tigt wird. Dieser administrative Anteil sollte im Vergleich zu den Nutzdaten nicht zu gro&#xDF; werden.</p>
<p><a name="@@ITOC@@DETAILS_3"></a></p>
<h2 id="details">Details</h2>
<p>Obwohl die Speicherverwaltung dynamischer Speicherobjekte f&#xFC;r den Entwickler weitestgehend unsichtbar
ist und sich seiner direkten Kontrolle entzieht, sollten bei Design und Entwicklung die Verwaltungskosten
im Auge behalten werden, sodass diese nicht unverh&#xE4;ltnism&#xE4;&#xDF;ig gro&#xDF; gegen&#xFC;ber
dem eigentlichen Dateninhalt werden. Bei internen Tabellen setzen sich die Verwaltungsdaten beispielsweise
aus einem von der Zeilenanzahl weitgehend unabh&#xE4;ngigen Anteil sowie einem Anteil f&#xFC;r jede
Zeile zusammen. Daher sind sowohl Tabellen mit sehr wenigen als auch Tabellen mit sehr schmalen Zeilen
ung&#xFC;nstig. Eine sortierte Tabelle von Integer-Zahlen verbraucht beispielsweise stets mehr Speicher
f&#xFC;r ihre Verwaltungsinformationen als f&#xFC;r die eigentlichen Nutzdaten. Hash-Tabellen haben einen noch h&#xF6;heren Verwaltungsaufwand pro Zeile.</p>
<p>Daneben spielt die sogenannte <span class="italic">Besetzung</span> komplexer Datenobjekte eine Rolle.
Werden die Nutzdaten in wenigen gro&#xDF;en Speicherobjekten abgelegt, f&#xE4;llt der administrative
Anteil im Allgemeinen nicht ins Gewicht. Wenn dagegen komplexe Datenobjekte (Strukturen, interne Tabellen)
viele tiefe Komponenten haben, ist Vorsicht geboten: Beispielsweise geht bei Tabellen von vielen relativ
kleinen Strings oder bei geschachtelten Tabellen, die viele relativ kleine Tabellen enthalten, unverh&#xE4;ltnism&#xE4;&#xDF;ig
viel Speicherplatz verloren. Im Wesentlichen sind dabei drei F&#xE4;lle zu unterscheiden:</p>
<ul>

<li><span class="bold">D&#xFC;nn besetzte komplexe Datenobjekte</span> <br>Ein solches Datenobjekt enth&#xE4;lt viele tiefe Komponenten, von denen die meisten initial sind.</li>

</ul>

<ul>

<li><span class="bold">Duplikativ besetzte komplexe Datenobjekte</span> <br>Ein solches Datenobjekt
enth&#xE4;lt viele tiefe Komponenten, von denen die meisten als Referenzvariablen oder &#xFC;ber Sharing auf die gleichen Nutzdaten verweisen.</li>

</ul>

<ul>

<li><span class="bold">Gering besetzte komplexe Datenobjekte</span> <br>Ein solches Datenobjekt enth&#xE4;lt
viele tiefe Komponenten, die auf unterschiedliche Objekte, Strings oder interne Tabellen verweisen, die aber nur sehr wenige Nutzdaten enthalten oder leer sind.</li>

</ul>

<p>D&#xFC;nn und duplikativ besetzte komplexe Datenobjekte k&#xF6;nnen in der Regel unbedenklich verwendet
werden. Bei gering besetzten komplexen Datenobjekten kann sich aber leicht ein Missverh&#xE4;ltnis
von Verwaltungs- zu Nutzdaten ergeben. F&#xFC;r den massiven Einsatz gering besetzter Datenobjekte ist ABAP nicht geeignet.</p>
<p>Da die Zusatzkosten f&#xFC;r Objekte am geringsten sind und da Objekte anders als dynamische Datenobjekte
restlos aus dem Speicher gel&#xF6;scht werden k&#xF6;nnen, kann bei geringem Datenbestand eventuell
auch eine Klassenverschalung als Alternative zur direkten Verwendung von internen Tabellen in Betracht gezogen werden. Dies ist eine Ausnahme zur Regel, dass
<a href="../abenuse_dyn_data_object_guidl" class="lnkpurple" title="Guideline">dynamische Datenobjekte</a> in der Regel direkt zu verwenden sind..</p>
<p><br style="display: block">
<div markdown="span" class="admonition note">
<p class="admonition-title">Note</p></p>
<p>Neben dem Verh&#xE4;ltnis von Verwaltungs- zu Nutzdaten ist bei internen Tabellen auch das Verh&#xE4;ltnis von dem f&#xFC;r Nutzdaten
<a href="../abeninitial_memory_requ_guidl" class="lnkpurple" title="Guideline">allokierten Speicher</a> zum tats&#xE4;chlich benutzten Speicher interessant.</p>
</div>

<h3 id="beispiel">Beispiel</h3>
<p>Ein Beispielprogramm <a href="../abenmemory_usage_abexa" class="blue">DEMO_MEMORY_USAGE</a> demonstriert die Verwaltungskosten tiefer Komponenten mit geringem Dateninhalt.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js"></script>
      
        <script src="../../javascript/hljs.js"></script>
      
    
  </body>
</html>